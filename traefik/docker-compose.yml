version: '3.8'

services:
  # reverse-proxy:
  #   image: traefik:v3.0 # The official Traefik docker image
  #   command: --configFile=/traefik.yml # Sử dụng tệp cấu hình
  #   ports:
  #     - "80:80"
  #     - "443:443"
  #     - "8080:8080" # Cổng cho giao diện quản trị Traefik
  #   volumes:
  #     - /var/run/docker.sock:/var/run/docker.sock # So that Traefik can listen to the Docker events
  #     - /Users/minhnguyen/Documents/works/KFM/kfm-devops/traefik/traefik.yml:/traefik.yml
  #   networks:
  #     - kfm_network
  #   deploy:
  #     labels:
  #       - "traefik.enable=true"
  #       - "traefik.http.routers.dashboard.rule=Host(`traefik.localhost`) && (PathPrefix(`/api`) || PathPrefix(`/dashboard`))"
  #       - "traefik.http.routers.dashboard.service=api@internal"
  #       - "traefik.http.services.reverse-proxy.loadbalancer.server.port=8080"
  # mongo:
  #   image: mongo:5.0.6
  #   volumes:
  #     - /Users/minhnguyen/Documents/works/KFM/kfm-devops/traefik/data/mongo:/data/db
  #   labels:
  #     - 'traefik.enable=true'
  #     - 'traefik.tcp.routers.mongo.rule=HostSNI(`mongodb.localhost`)'
  #     - 'traefik.tcp.routers.mongo.entrypoints=mongo'
  #     - 'traefik.tcp.routers.mongo.tls=true'
  #     - 'traefik.tcp.services.mongo.loadbalancer.server.port=27017'
  #   networks:
  #     - kfm_network
networks:
  kfm_network:
    external: true